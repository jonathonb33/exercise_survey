<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Exercise Survey</title>
</head>
<body>
  <h2>Help Us Make Exercise More Enjoyable!</h2>
  <form id="exercise-form">
    <label>Age: <input type="number" name="age" required></label><br><br>

    <label>Are you a gym member?
      <select name="gym_member" required>
        <option value="">--Select--</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </label><br><br>

    <div id="gym-questions" style="display:none;">
      <label>How often do you go to the gym?
        <select name="gym_frequency">
          <option value="">--Select--</option>
          <option value="Daily">Daily</option>
          <option value="Several times a week">Several times a week</option>
          <option value="Once a week">Once a week</option>
          <option value="Every other week">Every other week</option>
          <option value="Once a month or less">Once a month or less</option>
        </select>
      </label><br><br>

      <label>What do you like about your gym?<br>
        <textarea name="like_gym" rows="3" cols="50"></textarea>
      </label><br><br>

      <label>What do you wish your gym did differently to make workouts more enjoyable?<br>
        <textarea name="wish_gym" rows="3" cols="50"></textarea>
      </label><br><br>
    </div>

    <div id="non-gym-questions" style="display:none;">
      <label>Would you be open to joining a gym?
        <select name="open_to_gym">
          <option value="">--Select--</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </label><br><br>

      <label>What are the biggest reasons you don’t have a gym membership?<br>
        <textarea name="no_gym_reasons" rows="3" cols="50"></textarea>
      </label><br><br>

      <label>What do you wish gyms did differently that might make you want to join?<br>
        <textarea name="wish_gym_join" rows="3" cols="50"></textarea>
      </label><br><br>
    </div>

    <label>What are your favorite types of exercise, and what do you like or dislike about them?<br>
      <textarea name="favorite_exercise" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>What are a couple of your favorite hobbies, and what do you enjoy about them?<br>
      <textarea name="favorite_hobbies" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>What do you wish you could improve in your life right now?<br>
      <textarea name="wish_improve" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>Is there anything else you’d like to share to help us understand how to make exercise more enjoyable?<br>
      <textarea name="other_comments" rows="3" cols="50"></textarea>
    </label><br><br>

    <button type="submit">Submit</button>
  </form>

  <p id="thank-you" style="display:none; color: green;">Thank you! Your response has been recorded.</p>

  <script>
    const form = document.getElementById('exercise-form');
    const thankYou = document.getElementById('thank-you');

    // Show/hide follow-up questions
    form.gym_member.addEventListener('change', () => {
      const member = form.gym_member.value;
      document.getElementById('gym-questions').style.display = member === 'Yes' ? 'block' : 'none';
      document.getElementById('non-gym-questions').style.display = member === 'No' ? 'block' : 'none';
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      fetch("https://script.google.com/macros/s/AKfycbzFst5LXaGX1UawmB-8r1TtuHvekPVykXG5UEWOCevFBz7degUF1qNDMTX4bFCVN7Gs/exec", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      })
     .then(response => response.json())
    .then(result => {
      if (result.result === "success") {
        form.reset();
        document.getElementById('gym-questions').style.display = 'none';
        document.getElementById('non-gym-questions').style.display = 'none';
        thankYou.style.display = 'block';
      } else {
        alert("Submission failed: " + (result.error || "Unknown error"));
      }
    })
      .catch(err => {
        alert("There was a problem submitting your response. Please try again.");
        console.error(err);
      });
    });
  </script>
</body>
</html>
