<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Exercise Survey</title>
</head>
<body>
  <h2>Help Us Make Exercise More Enjoyable!</h2>
  <form id="exerciseForm"> <!-- FIXED ID -->
    <label>Age: <input type="number" name="age" required></label><br><br>

    <label>Are you a gym member?
      <select name="gymMember" required>
        <option value="">--Select--</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>
    </label><br><br>

    <div id="gym-questions" style="display:none;">
      <label>How often do you go to the gym?
        <select name="gymFrequency">
          <option value="">--Select--</option>
          <option value="Daily">Daily</option>
          <option value="Several times a week">Several times a week</option>
          <option value="Once a week">Once a week</option>
          <option value="Every other week">Every other week</option>
          <option value="Once a month or less">Once a month or less</option>
        </select>
      </label><br><br>

      <label>What do you like about your gym?<br>
        <textarea name="likeGym" rows="3" cols="50"></textarea>
      </label><br><br>

      <label>What do you wish your gym did differently to make workouts more enjoyable?<br>
        <textarea name="wishGym" rows="3" cols="50"></textarea>
      </label><br><br>
    </div>

    <div id="non-gym-questions" style="display:none;">
      <label>Would you be open to joining a gym?
        <select name="openToGym">
          <option value="">--Select--</option>
          <option value="Yes">Yes</option>
          <option value="No">No</option>
        </select>
      </label><br><br>

      <label>What are the biggest reasons you don’t have a gym membership?<br>
        <textarea name="reasonsNoGym" rows="3" cols="50"></textarea>
      </label><br><br>

      <label>What do you wish gyms did differently that might make you want to join?<br>
        <textarea name="wishGymNo" rows="3" cols="50"></textarea>
      </label><br><br>
    </div>

    <label>What are your favorite types of exercise, and what do you like or dislike about them?<br>
      <textarea name="exercisePreferences" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>What are a couple of your favorite hobbies, and what do you enjoy about them?<br>
      <textarea name="favoriteHobbies" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>What do you wish you could improve in your life right now?<br>
      <textarea name="lifeImprovements" rows="3" cols="50"></textarea>
    </label><br><br>

    <label>Is there anything else you’d like to share to help us understand how to make exercise more enjoyable?<br>
      <textarea name="anythingElseText" rows="3" cols="50"></textarea>
    </label><br><br>

    <button type="submit">Submit</button>
  </form>

  <p id="thank-you" style="display:none; color: green;">Thank you! Your response has been recorded.</p>

  <script>
    const form = document.getElementById('exerciseForm'); // FIXED ID
    const thankYou = document.getElementById('thank-you');

    form.gymMember.addEventListener('change', () => {
      const member = form.gymMember.value;
      document.getElementById('gym-questions').style.display = member === 'Yes' ? 'block' : 'none';
      document.getElementById('non-gym-questions').style.display = member === 'No' ? 'block' : 'none';
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      fetch("https://script.google.com/macros/s/AKfycbw-Yr0hclrZ0XEJrSg6OaDntxnKzqK4F4JoxyiJlCeBp2kH7vrYTJ4hP5D0VEPVCdrR/exec", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(result => {
        if (result.result === "success") {
          form.reset();
          document.getElementById('gym-questions').style.display = 'none';
          document.getElementById('non-gym-questions').style.display = 'none';
          thankYou.style.display = 'block';
        } else {
          alert("Submission failed: " + (result.error || "Unknown error"));
        }
      })
      .catch(err => {
        alert("There was a problem submitting your response. Please try again.");
        console.error(err);
      });
    });
  </script>
</body>
</html>
